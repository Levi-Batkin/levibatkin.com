<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Who's Most?</title>
<style>
body { font-family: sans-serif; touch-action: manipulation; margin: 20px; }
.hidden { display: none; }
.container { max-width: 600px; margin: auto; }
.player-row { border: 1px dashed #aaa; min-height: 50px; margin: 5px 0; padding: 5px; display: flex; flex-wrap: wrap; gap:5px; position: relative; }
.player { background: #f0f0f0; padding: 5px 10px; border-radius: 5px; cursor: grab; }
.player.dragging { opacity: 0.5; position: absolute; pointer-events: none; z-index: 1000; }
.tag { font-weight: bold; margin: 10px 0; }
.new-row-drop { padding: 10px; background: #eee; text-align: center; margin: 5px 0; border: 2px dashed #ccc; }
.drag-over { outline: 2px dashed #666; }
button { margin: 5px 0; }
</style>
</head>
<body>

<div class="container" id="setupScreen">
  <h2>Enter Players</h2>
  <div id="playersList">
    <div class="playerInputWrapper"><input type="text" placeholder="Player 1" class="playerInput"></div>
    <div class="playerInputWrapper"><input type="text" placeholder="Player 2" class="playerInput"></div>
  </div>
  <button onclick="addPlayer()">Add Player</button>
  <button onclick="startGame()">Start Game</button>
</div>

<div class="container hidden" id="gameScreen">
  <div class="question" id="question">Press New Question 🎲</div>
  <button onclick="generateQuestion()">New Question</button>
  <div class="players-board" id="playersBoard"></div>
</div>

<script>
const playersList = document.getElementById("playersList");
const playersBoard = document.getElementById("playersBoard");
const setupScreen = document.getElementById("setupScreen");
const gameScreen = document.getElementById("gameScreen");
const questionBox = document.getElementById("question");

let dragged = null;
let offsetX = 0, offsetY = 0;
let touchClone = null;

// --- Player setup ---
function addPlayer() {
  const count = playersList.querySelectorAll(".playerInputWrapper").length + 1;
  const wrapper = document.createElement("div");
  wrapper.classList.add("playerInputWrapper");
  wrapper.innerHTML = `<input type="text" placeholder="Player ${count}" class="playerInput">
                       <button onclick="removePlayer(this)">X</button>`;
  playersList.appendChild(wrapper);
}

function removePlayer(btn) {
  if(playersList.querySelectorAll(".playerInputWrapper").length <= 2) return;
  btn.parentElement.remove();
}

// --- Start game ---
function startGame() {
  const inputs = document.querySelectorAll(".playerInput");
  const players = [];
  inputs.forEach(input => { if(input.value.trim()) players.push(input.value.trim()); });
  if(players.length<2){ alert("Enter at least 2 players"); return; }

  setupScreen.classList.add("hidden");
  gameScreen.classList.remove("hidden");

  playersBoard.innerHTML = "";
  const topTag = document.createElement("div"); topTag.classList.add("tag"); topTag.textContent="Most Likely"; playersBoard.appendChild(topTag);
  const firstRow = createRow(); playersBoard.appendChild(firstRow);

  players.forEach(name=>{
    const div = document.createElement("div"); div.classList.add("player"); div.textContent=name;
    addDragAndTouch(div);
    firstRow.appendChild(div);
  });

  const newRowDrop = document.createElement("div");
  newRowDrop.classList.add("new-row-drop");
  newRowDrop.textContent="+ Drop here to create new group";
  playersBoard.appendChild(newRowDrop);

  newRowDrop.addEventListener("dragover", e=>{ e.preventDefault(); newRowDrop.classList.add("drag-over"); });
  newRowDrop.addEventListener("dragleave", ()=>newRowDrop.classList.remove("drag-over"));
  newRowDrop.addEventListener("drop", e=>{
    e.preventDefault(); newRowDrop.classList.remove("drag-over");
    if(dragged){
      const row = createRow();
      playersBoard.insertBefore(row, newRowDrop);
      row.appendChild(dragged);
    }
  });

  const bottomTag = document.createElement("div"); bottomTag.classList.add("tag"); bottomTag.textContent="Least Likely"; playersBoard.appendChild(bottomTag);
}

function createRow() {
  const row = document.createElement("div"); row.classList.add("player-row");
  row.addEventListener("dragover", e=>{ e.preventDefault(); row.classList.add("drag-over"); });
  row.addEventListener("dragleave", ()=>row.classList.remove("drag-over"));
  row.addEventListener("drop", e=>{ e.preventDefault(); row.classList.remove("drag-over"); if(dragged) row.appendChild(dragged); });
  return row;
}

// --- Drag + Touch ---
function addDragAndTouch(el) {
  // desktop drag
  el.draggable = true;
  el.addEventListener("dragstart", ()=>{ dragged=el; setTimeout(()=>el.style.display="none",0); });
  el.addEventListener("dragend", ()=>{ dragged=null; el.style.display="block"; });

  // mobile touch drag
  el.addEventListener("touchstart", e=>{
    e.preventDefault();
    dragged = el;
    const touch = e.touches[0];
    const rect = el.getBoundingClientRect();
    offsetX = touch.clientX - rect.left;
    offsetY = touch.clientY - rect.top;

    // clone for dragging so original stays in row
    touchClone = el.cloneNode(true);
    touchClone.classList.add("dragging");
    document.body.appendChild(touchClone);
    moveClone(touch);
  });

  el.addEventListener("touchmove", e=>{
    if(!touchClone) return;
    const touch = e.touches[0];
    moveClone(touch);
  });

  el.addEventListener("touchend", e=>{
    if(!touchClone) return;
    const rows = document.querySelectorAll(".player-row, .new-row-drop");
    const rectClone = touchClone.getBoundingClientRect();
    rows.forEach(row=>{
      const rect = row.getBoundingClientRect();
      if(rectClone.left+rectClone.width/2 > rect.left &&
         rectClone.left+rectClone.width/2 < rect.right &&
         rectClone.top+rectClone.height/2 > rect.top &&
         rectClone.top+rectClone.height/2 < rect.bottom){
        if(row.classList.contains("new-row-drop")){
          const newRow = createRow();
          playersBoard.insertBefore(newRow, row);
          newRow.appendChild(el);
        } else {
          row.appendChild(el);
        }
      }
    });
    touchClone.remove();
    touchClone=null;
    dragged=null;
  });

  function moveClone(touch){
    touchClone.style.left = (touch.clientX - offsetX) + "px";
    touchClone.style.top = (touch.clientY - offsetY) + "px";
  }
}

// --- Questions ---
const questions = [
    // 🥂 Party & Night Out
    "Who’s most likely to lose their phone on a night out?",
    "Who’s most likely to get kicked out of a club?",
    "Who would be the first to vomit at pres?",
    "Who’s most likely to go missing on a night out and turn up with new friends?",
    "Who’s dancing on a table by midnight?",
    "Who’s most likely to order shots when nobody asked for them?",
    "Who’s texting their ex at 3am?",
    "Who’s most likely to pull someone way out of their league?",
    "Who’s going home with takeaway food instead of a date?",
    "Who’s crying in the club (for literally no reason)?",

    // 💻 Work & Adulting
    "Who’s most likely to quit their job dramatically?",
    "Who’s calling in “sick” when they’re just hungover?",
    "Who secretly checks Indeed during work hours every day?",
    "Who would forget to pay rent until the landlord threatens?",
    "Who’s still living like a student even though they have a salary?",
    "Who’s most likely to ghost their boss after getting a new job?",
    "Who would accidentally reply-all to an email with something unhinged?",
    "Who’s most likely to become an MLM rep?",
    "Who’s pretending to know Excel formulas but actually Googling them?",
    "Who would make the office printer their mortal enemy?",

    // ❤ Dating & Love Life
    "Who’s catching feelings after one date?",
    "Who’s still hung up on their situationship from 2019?",
    "Who would go on Love Island?",
    "Who’s most likely to get caught on a date with someone’s ex?",
    "Who’s falling in love with their Hinge match before meeting IRL?",
    "Who’d send a risky DM to a celebrity?",
    "Who’s most likely to ghost someone and then bump into them in Tesco?",
    "Who’s still stalking their ex’s new partner on Instagram?",
    "Who’d have the messiest breakup group chat drama?",
    "Who’s most likely to get engaged in Vegas after 2 weeks of dating?",

    // 🏠 Housemates & Living
    "Who never replaces the toilet roll?",
    "Who’d eat someone else’s leftovers and deny it?",
    "Who’s most likely to have a “mystery smell” in their room?",
    "Who never takes the bins out?",
    "Who’s most likely to accidentally set the kitchen on fire?",
    "Who’s living in organised chaos (but swears they know where everything is)?",
    "Who’s borrowing clothes and never returning them?",
    "Who’s got the loudest “adult sleepovers”?",
    "Who would host a party on a Tuesday?",
    "Who’s most likely to never buy communal toilet cleaner but always use it?",

    // 🧠 Chaos & Personality
    "Who’s most likely to start an argument in the group chat?",
    "Who’s accidentally oversharing their trauma to a stranger?",
    "Who’s getting cancelled on Twitter first?",
    "Who would join a cult because the vibes were good?",
    "Who’s buying crystals and insisting Mercury is in retrograde?",
    "Who’d believe a pyramid scheme is “financial freedom”?",
    "Who’s most likely to fight a goose unprovoked?",
    "Who’s running away to join the circus?",
    "Who would try to fistfight a celebrity?",
    "Who’s crying in Tesco over the meal deal price increase?",

    // 📱 Social Media & Tech
    "Who’s still lurking on Facebook daily?",
    "Who’s most likely to film a TikTok dance in public?",
    "Who’s accidentally liking their ex’s post from 4 years ago?",
    "Who’d have a secret burner account?",
    "Who’s addicted to BeReal but always late?",
    "Who’s starting a podcast nobody asked for?",
    "Who’s most likely to buy a ring light and never use it?",
    "Who’s tweeting something that gets taken wildly out of context?",
    "Who’s pretending to be “off socials” but checks every story?",
    "Who would get catfished the easiest?",

    // 💸 Money & Chaos Spending
    "Who’s buying festival tickets before paying rent?",
    "Who’s most likely to blow £200 on ASOS in one sitting?",
    "Who’s buying an air fryer and never using it?",
    "Who’s the worst at splitting a bill fairly?",
    "Who’d spend their last £5 on a Deliveroo?",
    "Who’s most likely to forget their card PIN every time?",
    "Who’s gambling on sports they don’t even watch?",
    "Who’s buying crypto at the exact wrong time?",
    "Who’d spend £100 on scented candles?",
    "Who’s most likely to buy festival glitter in bulk and still use it years later?",

    // ✈ Travel & Adventure
    "Who’s most likely to miss their flight because they overslept?",
    "Who’s going to pack 2 hours before a trip?",
    "Who would accidentally end up in the wrong country?",
    "Who’s most likely to “find themselves” on a yoga retreat?",
    "Who’d be scammed by a tuk-tuk driver instantly?",
    "Who’s most likely to lose their passport abroad?",
    "Who’d flirt their way into free drinks in another country?",
    "Who would accidentally join a protest while sightseeing?",
    "Who’s most likely to buy something cursed at a souvenir shop?",
    "Who’d turn a weekend city break into a survival story?",

    // 🧃 Health, Food & Fitness
    "Who’s most likely to join the gym and go once?",
    "Who’s eating cereal for dinner most nights?",
    "Who’d try a fad diet for 3 days then give up?",
    "Who’s most likely to live off meal deals?",
    "Who’s putting hot sauce on everything?",
    "Who’d try dry January and fail by the 2nd?",
    "Who’s blending spinach into smoothies just to feel better?",
    "Who’s most likely to argue pineapple does belong on pizza?",
    "Who’d UberEats McDonald’s at 10am?",
    "Who’s most likely to get food poisoning abroad?",

    // 🎬 Pop Culture & Random
    "Who’s still watching kids’ cartoons unironically?",
    "Who’d get obsessed with a conspiracy theory?",
    "Who’s most likely to DM a celebrity something embarrassing?",
    "Who’s binging reality TV and pretending it’s “ironic”?",
    "Who’d try to start a pyramid scheme in The Sims?",
    "Who’s dressing up for Comic-Con with zero shame?",
    "Who’d join a viral TikTok challenge and regret it?",
    "Who’s most likely to cry over a Marvel movie death?",
    "Who’d go on a game show and immediately lose?",
    "Who’s most likely to accidentally become a meme?"
  ];
function generateQuestion(){ 
  const q = questions[Math.floor(Math.random()*questions.length)]; 
  questionBox.textContent=q; 
}
</script>
</body>
</html>
